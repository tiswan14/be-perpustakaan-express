generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma/"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model User {
  id       String  @id @default(cuid())
  nama     String
  email    String  @unique
  nim      String?
  nid      String?
  password String
  role     String  @default("user")
  status   String  @default("Active")

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Book {
  id            Int     @id @default(autoincrement())
  judul         String
  isbn          String  @unique
  deskripsi     String? // nullable
  tahunTerbit   Int
  penerbit      String? // nullable
  jumlahHalaman Int? // nullable
  bahasa        String? // nullable
  sampul        String? // nullable (misal URL gambar)
  tersedia      Boolean @default(true)
  stok          Int     @default(1)

  penulisId  Int
  kategoriId Int

  penulis  Author   @relation(fields: [penulisId], references: [id])
  kategori Category @relation(fields: [kategoriId], references: [id])

  dibuatPada     DateTime @default(now())
  diperbaruiPada DateTime @updatedAt
}

model Author {
  id   Int     @id @default(autoincrement())
  nama String
  bio  String?
  buku Book[]
}

model Category {
  id        Int     @id @default(autoincrement())
  nama      String  @unique
  deskripsi String?
  buku      Book[]
}
